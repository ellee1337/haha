-- // Load Rayfield UI Library
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- // Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local localPlayer = Players.LocalPlayer
local magnetEnabled = false
local targetName = ""  -- leave blank; can be set in UI later
local connection

-- // Create Window
local Window = Rayfield:CreateWindow({
	Name = "Magnet Teleport GUI",
	LoadingTitle = "Teleport Magnet",
	LoadingSubtitle = "by cookie codes",
	ConfigurationSaving = {
		Enabled = false
	}
})

-- // Create Tab
local MainTab = Window:CreateTab("Main", 4483362458)

-- // Target Player Input
local TargetInput = MainTab:CreateInput({
	Name = "Target Player Name",
	PlaceholderText = "Enter player name",
	RemoveTextAfterFocusLost = false,
	Callback = function(Text)
		targetName = Text
	end,
})

-- // Toggle Magnet
local Toggle = MainTab:CreateToggle({
	Name = "Enable Magnet Teleport",
	CurrentValue = false,
	Flag = "MagnetToggle",
	Callback = function(Value)
		magnetEnabled = Value

		if magnetEnabled then
			Rayfield:Notify({
				Title = "Magnet Active",
				Content = "Youâ€™re now teleporting to " .. targetName,
				Duration = 3
			})

			connection = RunService.RenderStepped:Connect(function()
				if not magnetEnabled then return end
				local targetPlayer = Players:FindFirstChild(targetName)
				if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
					local targetPos = targetPlayer.Character.HumanoidRootPart.Position
					if localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
						localPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(targetPos + Vector3.new(0, 3, 0))
					end
				end
			end)

		else
			Rayfield:Notify({
				Title = "Magnet Disabled",
				Content = "Teleport stopped.",
				Duration = 3
			})

			if connection then
				connection:Disconnect()
				connection = nil
			end
		end
	end,
})
